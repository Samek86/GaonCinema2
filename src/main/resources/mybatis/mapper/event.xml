<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="event">
	<insert id="add" parameterType="eventDTO">
	insert into eventpk values(eventpk_seq.nextval,
	#{type}, #{fileName}, {fileNameTh}, #{title}, #{content}, #{startDate}, #{endDate}, #{readNum})
	</insert>
	
	<select id="select" parameterType="eventDTO" resultType="eventDTO">
	select * from (
	select rownum as rn, num, type, filename, filenameTh, title, content, startDate, endDate, readNum from eventpk where type = #{type})
	where rn between #{start} and #{end}
	</select>
	
	<select id="selectAll" resultType="eventDTO">
	select * from eventpk
	</select>
	
	<select id="selectNum" parameterType="String" resultType="Integer">
	select count(*) from eventpk where type = #{type} order by num
	</select>
	
	<select id="selectType" resultType="String">
	select distinct type from eventpk
	</select>
	
	<select id="detail" parameterType="Integer" resultType="eventDTO">
	select * from eventpk where num = #{num}
	</select>
	
	<update id="upReadNum" parameterType="Integer">
	update eventpk set readnum = readnum +1 where num = #{num}
	</update>
	
	<update id="downReadNum" parameterType="Integer">
	update eventpk set readnum = readnum -1 where num = #{num}
	</update>
	
	<update id="update" parameterType="eventDTO">
	update eventpk set type=#{type}, filename = #{fileName}, filenameth = {fileNameTh}, title = #{title}, content = #{content}, startdate = #{startDate}, enddate = #{endDate}
	where num = #{num}
	</update>
	
	<delete id="delete" parameterType="Integer">
	delete from eventpk where num = #{num}
	</delete>
</mapper>